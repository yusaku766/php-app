# PHP App ① レビュー

## 全般

### 以下のaタグのリンクを押下した際にedit.phpの$_GETにどんな値が格納されるか説明してください。

```html
<a href="edit.php?todo_id=123&todo_content=焼肉">更新</a>
```

$_GETには、todo_idキーに123という数値、todo_contentキーに焼肉という文字列をもつ連想配列が格納される。


### 以下のフォームの送信ボタンを押下した際にstore.phpの$_POSTにどんな値が格納されるか説明してください。

```html
<form action="store.php" method="post">
    <input type="text" name="id" value="123">
    <textarea name="content">焼肉</textarea>
    <button type="submit">送信</button>
</form>
```

$_POSTには、idキーには123という値が、contentキーには焼肉という文字列をもつ連想配列が格納される。

### `require_once()` は何のために記述しているか説明してください。

require_once() は指定したファイルを読み込み、そのファイルに含まれるコードを実行するために記述する。これにより、クラス、関数、設定などをファイルから取り込むことができる。

### `savePostedData($post)`は何をしているか説明してください。

投稿されたデータ$postを検証し必要に応じて加工した後、データベースやファイルに保存する処理を行う。

### `header('location: ./index.php')`は何をしているか説明してください。

header()はブラウザに対してリダイレクトを指示するPHPの関数で、具体的にはHTTPレスポンスのヘッダーに「Location」フィールドを設定し、ブラウザに現在のページから ./index.php へ自動的に移動するように指示します。

### `getRefererPath()`は何をしているか説明してください。

getRefererPath()はHTTPリファラからパス部分を取得する関数で、ユーザーが現在のページにアクセスする前に訪れていたページのURLのパス部分を取得して返す。

### `connectPdo()` の返り値は何か、またこの記述は何をするための記述か説明してください。

connectPdo()` の返り値はPdoオブジェクトである。
この記述は指定されたデータベースに接続するためのPDOオブジェクトを取得するために必要。

### `try catch`とは何か説明してください。

try-catchは、プログラムで発生する可能性のあるエラーや例外を処理するための構文。
tryでエラーが発生する可能性のあるコードを囲み、
catchでtry ブロック内でエラーが発生したときに実行される処理を指定する。
この構文を使うことで、エラーが発生してもプログラムがクラッシュせず、適切にエラー処理が行えるようになる。

### Pdoクラスをインスタンス化する際に`try catch`が必要な理由を説明してください。

PDOクラスのインスタンス化にtry-catchを使用する理由は、データベース接続中に発生する可能性のあるエラーを適切に処理し、プログラムの安定性と信頼性を保つため。

## 新規作成

### `createTodoData($post)`は何をしているか説明してください。

引数として受け取った$postデータを基に新しいTodoアイテムを作成・保存しデータベースに追加している。

## 一覧

### `getTodoList()`の返り値について説明してください。

getTodoList()の返り値はgetAllRecords()である。getAllRecords()の返り値はtodosテーブルから取得した全てのレコードの中で、deleted_atがNULLであるレコードのみを返す。
よってgetTodoList()はtodosテーブルのdeleted_atがNULLであるレコードを返す。

### `<?= ?>`は何の省略形か説明してください。

<?= ?>はショートタグと呼ばれる構文であり、PHPのecho文を簡潔に書くための省略形である。

## 更新

### `getSelectedTodo($_GET['id'])`の返り値は何か、またなぜ`$_GET['id']` を引数に渡すのか説明してください。

getSelectedTodo($_GET['id']) は、指定されたTODOアイテムのcontentを返す。$_GET['id'] で指定されたIDのTODOアイテムをデータベースから取得し、その内容を返り値とする。指定されたIDに対応するTODOアイテムの情報をデータベースから取得するため。

### `updateTodoData($post)`は何をしているか説明してください。

updateTodoData($post) は、指定されたタスク（$post['id']）の内容（$post['content']）をデータベース内のtodosテーブルで更新する処理をデーターベースに接続している。

## 削除

### `deleteTodoData($id)`は何をしているか説明してください。

deleteTodoData($id) は、指定したidのTODOアイテムのdeleted_atカラムを現在の日時に設定して、アイテムを論理削除する。

### `deleted_at`を現在時刻で更新すると一覧画面からToDoが非表示になる理由を説明してください。

deleted_atを現在時刻で更新すると一覧画面に表示されなくなるのは、一覧画面がdeleted_at＝NULLのレコードのみを表示するから。
deleted_atが日時で埋められると、そのアイテムは削除済みと見なされ一覧から除外される。

### 今回のように実際のデータを削除せずに非表示にすることで削除されたように扱うことを〇〇削除というか。

論理削除

### 実際にデータを削除することを〇〇削除というか。

物理削除

### 前問のそれぞれの削除のメリット・デメリットについて説明してください。

論理削除はデータの復元が可能でデータの履歴を保持できるが、データベースのサイズが増大しクエリ文も複雑になる。
物理削除はデータベースが軽量化されクエリ文も単純で済むが、削除されたデータの復元が困難でデータ履歴を保持できない。